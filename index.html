<html><head>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect("http://localhost"); // url of running server
  socket.on('news', function (data) {
      var X = document.getElementById("X");
      var y =
          "<img src=" + data.image + " style=\"float:left\"> " +
          "<a href=http://twitter.com/" + data.id + ">@"+data.id + "</a> / " +
          data.name +" :<br>" +
          data.text.replace(/\n/g, "<br>") +
          " (via " + data.source + ")<hr>"
      X.innerHTML = y + X.innerHTML;
  });

  function PosttoTwitter(msg) {
      socket.emit("post", {text:msg});
      return false;
  }
  function y(event) {
      if (event.shiftKey && (event.keyCode==13 || event.keyCode==10)) {
          PosttoTwitter(document.getElementById("Y").value);
          document.getElementById("Y").value = "";
          return false;
      }
      return true;
  }
  function z(){
      PosttoTwitter(document.getElementById("Y").value);
        document.getElementById("Y").value = "";
  }
</script>
</head>
<body>
<h3>und dich</h3>
<textarea id="Y" style="width: 80%; height: 60px" onkeydown="return y(event)">Shift+Enter to post</textarea>
<input type="button" onclick=z() value="post">
<hr> <div id="X" style="width: 80%"></div>
<hr> 上に行くほど新しい
</body>
